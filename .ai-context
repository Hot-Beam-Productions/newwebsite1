# AI Context - Hot Beam Website

## Current Stack
- Next.js 16 + TypeScript + Tailwind CSS v4
- Firebase Auth + Firestore client SDK for CMS/admin
- Cloudflare Worker contact endpoint
- Cloudflare Worker Instagram token refresh automation
- Cloudflare R2 media uploads via authenticated API route

## High-Level Flows
1. Public request -> `getPublicSiteData()` -> Firestore REST fetch -> schema validation -> fallback to `src/data/data.json`.
2. Admin edit -> client-side action -> schema parse -> Firestore write -> route revalidation.
3. Admin image upload -> `/api/upload` -> Firebase ID token verification -> R2 upload.
4. Contact form -> Cloudflare worker -> input validation + Turnstile -> email + optional Google Sheet log.

## Key Files
- `src/lib/public-site-data.ts`
- `src/lib/schemas.ts`
- `src/lib/firestore-client.ts`
- `src/app/api/upload/route.ts`
- `worker/src/index.ts`
- `worker-ig-refresh/src/index.ts`

## Operational Notes
- Keep `.env.local` untracked; use `.env.local.example` as template.
- `firebase-debug.log` and `.wrangler` artifacts must stay out of git.
- Firestore rules should require verified domain admins for writes.

## Code Expectations
- Write direct, readable code with clear names.
- Avoid "AI slop" patterns (over-abstracted, hard-to-follow helpers).
- Remove unused imports/files/dependencies during refactors.
- Preserve behavior unless change is intentional and documented.
